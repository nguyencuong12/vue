{"remainingRequest":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\babel-loader\\lib\\index.js!E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Cuong\\vueProject\\vue2_setup\\vue2\\src\\api\\ajax\\ajax.js","dependencies":[{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\src\\api\\ajax\\ajax.js","mtime":1610420052828},{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHFzIGZyb20gInFzIjsKaW1wb3J0IHsgVG9rZW5NYW5hZ2VyIH0gZnJvbSAiLi4vLi4vdG9rZW5NYW5hZ2VyL3Rva2VuIjsKCnZhciBkZWZhdWx0SGVhZGVycyA9IGZ1bmN0aW9uIGRlZmF1bHRIZWFkZXJzKCkgewogIHJldHVybiB7CiAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIKICB9Owp9OwoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgdmFyIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5oZWFkZXJzWyJDb250ZW50LVR5cGUiXSB8fCAiIjsKCiAgaWYgKHJlcXVlc3QuZGF0YSAmJiBjb250ZW50VHlwZS5pbmNsdWRlcygiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikpIHsKICAgIHJlcXVlc3QuZGF0YSA9IHFzLnN0cmluZ2lmeShyZXF1ZXN0LmRhdGEpOwogIH0KCiAgcmVxdWVzdC5oZWFkZXJzID0gcmVxdWVzdC5oZWFkZXJzIHx8IGRlZmF1bHRIZWFkZXJzKCk7CiAgdmFyIHRva2VuID0gVG9rZW5NYW5hZ2VyLmdldFRva2VuKCk7CgogIGlmICh0b2tlbikgewogICAgcmVxdWVzdC5oZWFkZXJzWyJBdXRob3JpemF0aW9uIl0gPSAiQmVhcmVyICIgKyB0b2tlbjsKICB9CgogIHJldHVybiByZXF1ZXN0Owp9KTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHN3aXRjaCAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICBjYXNlIDQwMToKICAgICAgewogICAgICAgIFRva2VuTWFuYWdlci5yZW1vdmVUb2tlbigpOwogICAgICAgIHdpbmRvdy5hbGVydCgiU2Vzc2lvbiBoYXMgZXhwaXJlZCBvciBpbnZhbGlkLiIpOyAvLyB3aW5kb3cuYWxlcnQod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CgogICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICIvbG9naW4iOwogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgY2FzZSA0MDQ6CiAgICAgIHsKICAgICAgICB3aW5kb3cuYWxlcnQoZXJyb3IucmVzcG9uc2UuZGF0YS5kZXNjKTsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgIGRlZmF1bHQ6CiAgICAgIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9CiAgICAvLyBkZWZhdWx0OiB7CiAgICAvLyAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAvLyAgIGJyZWFrOwogICAgLy8gfQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["E:/Cuong/vueProject/vue2_setup/vue2/src/api/ajax/ajax.js"],"names":["axios","qs","TokenManager","defaultHeaders","interceptors","request","use","contentType","headers","data","includes","stringify","token","getToken","response","error","status","removeToken","window","alert","location","desc","Promise","reject"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AAEA,SAASC,YAAT,QAA6B,0BAA7B;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SAAO;AAC5B,oBAAgB;AADY,GAAP;AAAA,CAAvB;;AAGAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAACD,OAAD,EAAa;AAC1C,MAAIE,WAAW,GAAGF,OAAO,CAACG,OAAR,CAAgB,cAAhB,KAAmC,EAArD;;AACA,MAAIH,OAAO,CAACI,IAAR,IAAgBF,WAAW,CAACG,QAAZ,CAAqB,mCAArB,CAApB,EAA+E;AAC7EL,IAAAA,OAAO,CAACI,IAAR,GAAeR,EAAE,CAACU,SAAH,CAAaN,OAAO,CAACI,IAArB,CAAf;AACD;;AAEDJ,EAAAA,OAAO,CAACG,OAAR,GAAkBH,OAAO,CAACG,OAAR,IAAmBL,cAAc,EAAnD;AAEA,MAAMS,KAAK,GAAGV,YAAY,CAACW,QAAb,EAAd;;AACA,MAAID,KAAJ,EAAW;AACTP,IAAAA,OAAO,CAACG,OAAR,CAAgB,eAAhB,IAAmC,YAAYI,KAA/C;AACD;;AAED,SAAOP,OAAP;AACD,CAdD;AAgBAL,KAAK,CAACI,YAAN,CAAmBU,QAAnB,CAA4BR,GAA5B,CACE,UAACQ,QAAD,EAAc;AACZ,SAAOA,QAAP;AACD,CAHH,EAIE,UAACC,KAAD,EAAW;AACT,UAAQA,KAAK,CAACD,QAAN,CAAeE,MAAvB;AACE,SAAK,GAAL;AAAU;AACRd,QAAAA,YAAY,CAACe,WAAb;AACAC,QAAAA,MAAM,CAACC,KAAP,CAAa,iCAAb,EAFQ,CAGR;;AACAD,QAAAA,MAAM,CAACE,QAAP,GAAkB,QAAlB;AACA;AACD;;AAED,SAAK,GAAL;AAAU;AACRF,QAAAA,MAAM,CAACC,KAAP,CAAaJ,KAAK,CAACD,QAAN,CAAeL,IAAf,CAAoBY,IAAjC;AACA;AACD;;AACD;AAAS;AACP,eAAOC,OAAO,CAACC,MAAR,CAAeR,KAAf,CAAP;AACD;AACD;AACA;AACA;AACA;AAnBF;AAqBD,CA1BH;AA6BA,eAAef,KAAf","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\";\r\n\r\nimport { TokenManager } from \"../../tokenManager/token\";\r\n\r\nconst defaultHeaders = () => ({\r\n  \"Content-Type\": \"application/json;charset=UTF-8\",\r\n});\r\naxios.interceptors.request.use((request) => {\r\n  var contentType = request.headers[\"Content-Type\"] || \"\";\r\n  if (request.data && contentType.includes(\"application/x-www-form-urlencoded\")) {\r\n    request.data = qs.stringify(request.data);\r\n  }\r\n\r\n  request.headers = request.headers || defaultHeaders();\r\n\r\n  const token = TokenManager.getToken();\r\n  if (token) {\r\n    request.headers[\"Authorization\"] = \"Bearer \" + token;\r\n  }\r\n\r\n  return request;\r\n});\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    switch (error.response.status) {\r\n      case 401: {\r\n        TokenManager.removeToken();\r\n        window.alert(\"Session has expired or invalid.\");\r\n        // window.alert(window.location.search);\r\n        window.location = \"/login\";\r\n        break;\r\n      }\r\n\r\n      case 404: {\r\n        window.alert(error.response.data.desc);\r\n        break;\r\n      }\r\n      default: {\r\n        return Promise.reject(error);\r\n      }\r\n      // default: {\r\n      //   return Promise.reject(error);\r\n      //   break;\r\n      // }\r\n    }\r\n  },\r\n);\r\n\r\nexport default axios;\r\n"]}]}