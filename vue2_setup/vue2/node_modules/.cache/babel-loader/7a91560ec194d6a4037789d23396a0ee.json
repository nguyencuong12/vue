{"remainingRequest":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\babel-loader\\lib\\index.js!E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\Cuong\\vueProject\\vue2_setup\\vue2\\src\\api\\ajax\\ajax.js","dependencies":[{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\src\\api\\ajax\\ajax.js","mtime":1610073870747},{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Cuong\\vueProject\\vue2_setup\\vue2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgVG9rZW5NYW5hZ2VyIH0gZnJvbSAiLi4vLi4vdG9rZW5NYW5hZ2VyL3Rva2VuIjsKCnZhciBkZWZhdWx0SGVhZGVycyA9IGZ1bmN0aW9uIGRlZmF1bHRIZWFkZXJzKCkgewogIHJldHVybiB7CiAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCIKICB9Owp9OwoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QoZnVuY3Rpb24gKHJlcXVlc3QpIHsKICB2YXIgY29udGVudFR5cGUgPSByZXF1ZXN0LmhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdIHx8ICIiOwoKICBpZiAocmVxdWVzdC5kYXRhICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSkgewogICAgcmVxdWVzdC5kYXRhID0gcXMuc3RyaW5naWZ5KHJlcXVlc3QuZGF0YSk7CiAgfQoKICByZXF1ZXN0LmhlYWRlcnMgPSByZXF1ZXN0LmhlYWRlcnMgfHwgZGVmYXVsdEhlYWRlcnMoKTsKICB2YXIgdG9rZW4gPSBUb2tlbk1hbmFnZXIuZ2V0VG9rZW4oKTsKCiAgaWYgKHRva2VuKSB7CiAgICByZXF1ZXN0LmhlYWRlcnNbIkF1dGhvcml6YXRpb24iXSA9ICJCZWFyZXIgIiArIHRva2VuOwogIH0KCiAgcmV0dXJuIHJlcXVlc3Q7Cn0pOwpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyKSB7CiAgc3dpdGNoIChlcnIucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICBjYXNlIDQwMToKICAgICAgVG9rZW5NYW5hZ2VyLnJlbW92ZVRva2VuKCk7CiAgICAgIHdpbmRvdy5hbGVydCgiU2Vzc2lvbiBoYXMgZXhwaXJlZCBvciBpbnZhbGlkLiIpOyAvLyB3aW5kb3cuYWxlcnQod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CgogICAgICB3aW5kb3cubG9jYXRpb24gPSAiL2xvZ2luIjsKICAgICAgYnJlYWs7CgogICAgY2FzZSA0MDQ6CiAgICAgIHdpbmRvdy5hbGVydChlcnJvci5yZXNwb25zZS5kYXRhLmRlc2MpOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAgIGJyZWFrOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["E:/Cuong/vueProject/vue2_setup/vue2/src/api/ajax/ajax.js"],"names":["axios","TokenManager","defaultHeaders","interceptors","request","contentType","headers","data","includes","qs","stringify","token","getToken","response","err","status","removeToken","window","alert","location","error","desc","Promise","reject"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,YAAT,QAA6B,0BAA7B;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SAAO;AAC5B,oBAAgB;AADY,GAAP;AAAA,CAAvB;;AAGAF,KAAK,CAACG,YAAN,CAAmBC,OAAnB,CAA2B,UAACA,OAAD,EAAa;AACtC,MAAIC,WAAW,GAAGD,OAAO,CAACE,OAAR,CAAgB,cAAhB,KAAmC,EAArD;;AACA,MAAIF,OAAO,CAACG,IAAR,IAAgBF,WAAW,CAACG,QAAZ,CAAqB,mCAArB,CAApB,EAA+E;AAC7EJ,IAAAA,OAAO,CAACG,IAAR,GAAeE,EAAE,CAACC,SAAH,CAAaN,OAAO,CAACG,IAArB,CAAf;AACD;;AAEDH,EAAAA,OAAO,CAACE,OAAR,GAAkBF,OAAO,CAACE,OAAR,IAAmBJ,cAAc,EAAnD;AAEA,MAAMS,KAAK,GAAGV,YAAY,CAACW,QAAb,EAAd;;AACA,MAAID,KAAJ,EAAW;AACTP,IAAAA,OAAO,CAACE,OAAR,CAAgB,eAAhB,IAAmC,YAAYK,KAA/C;AACD;;AAED,SAAOP,OAAP;AACD,CAdD;AAgBAJ,KAAK,CAACG,YAAN,CAAmBU,QAAnB,CACE,UAACA,QAAD,EAAc;AACZ,SAAOA,QAAP;AACD,CAHH,EAIE,UAACC,GAAD,EAAS;AACP,UAAQA,GAAG,CAACD,QAAJ,CAAaE,MAArB;AACE,SAAK,GAAL;AACEd,MAAAA,YAAY,CAACe,WAAb;AACAC,MAAAA,MAAM,CAACC,KAAP,CAAa,iCAAb,EAFF,CAGE;;AACAD,MAAAA,MAAM,CAACE,QAAP,GAAkB,QAAlB;AACA;;AACF,SAAK,GAAL;AACEF,MAAAA,MAAM,CAACC,KAAP,CAAaE,KAAK,CAACP,QAAN,CAAeN,IAAf,CAAoBc,IAAjC;;AACF;AACE,aAAOC,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACA;AAXJ;AAaD,CAlBH;AAqBA,eAAepB,KAAf","sourcesContent":["import axios from \"axios\";\r\n\r\nimport { TokenManager } from \"../../tokenManager/token\";\r\n\r\nconst defaultHeaders = () => ({\r\n  \"Content-Type\": \"application/json;charset=UTF-8\",\r\n});\r\naxios.interceptors.request((request) => {\r\n  var contentType = request.headers[\"Content-Type\"] || \"\";\r\n  if (request.data && contentType.includes(\"application/x-www-form-urlencoded\")) {\r\n    request.data = qs.stringify(request.data);\r\n  }\r\n\r\n  request.headers = request.headers || defaultHeaders();\r\n\r\n  const token = TokenManager.getToken();\r\n  if (token) {\r\n    request.headers[\"Authorization\"] = \"Bearer \" + token;\r\n  }\r\n\r\n  return request;\r\n});\r\n\r\naxios.interceptors.response(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (err) => {\r\n    switch (err.response.status) {\r\n      case 401:\r\n        TokenManager.removeToken();\r\n        window.alert(\"Session has expired or invalid.\");\r\n        // window.alert(window.location.search);\r\n        window.location = \"/login\";\r\n        break;\r\n      case 404:\r\n        window.alert(error.response.data.desc);\r\n      default:\r\n        return Promise.reject(error);\r\n        break;\r\n    }\r\n  },\r\n);\r\n\r\nexport default axios;\r\n"]}]}