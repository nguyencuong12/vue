{"remainingRequest":"E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\src\\views\\Template\\template-edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\src\\views\\Template\\template-edit.vue","mtime":1611894241637},{"path":"E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Cuong\\MAIN_VUE\\vue2_setup\\vue2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBXVlNQREZWaWV3Q29tcG9uZW50LCBETkRJbnRlcmFjdENvbXBvbmVudCB9IGZyb20gIi4uLy4uL2NvbXBvbmVudHMiOw0KaW1wb3J0IHsgUERGSGVscGVyIH0gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9XVlMvUERGSGVscGVyIjsNCi8vIGltcG9ydCB7IEZpbGVBY3Rpb24gfSBmcm9tICIuLi8uLi92dWV4L2FjdGlvbnMiOw0KLy8gaW1wb3J0IHsgUGRmQWN0aW9uIH0gZnJvbSAiLi4vLi4vdnVleC9hY3Rpb25zIjsNCmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gInV1aWQiOw0KaW1wb3J0IHsgVGVtcGxhdGVBUEkgfSBmcm9tICIuLi8uLi9hcGkiOw0KaW1wb3J0IFNpZ25lck9yZGVyRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvU2lnbmVyT3JkZXIvU2lnbmVyT3JkZXIiOw0KLy8gaW1wb3J0IHsgTW9kYWxPcmRlckFjdGlvbiB9IGZyb20gIi4uLy4uL3Z1ZXgvYWN0aW9ucyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBTaWduZXJEaWFsb2c6IFNpZ25lck9yZGVyRGlhbG9nLA0KICAgIFdWU1BERlZpZXdDb21wb25lbnQsDQogICAgRE5ESW50ZXJhY3RDb21wb25lbnQsDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgdGFrZUN1cnJlbnRDb250cm9sKCkgew0KICAgICAgLy8gICAgIGN1cnJlbnRDb250cm9sPXtjb250cm9sQ29sbGVjdGlvbnNSZWYuY3VycmVudC5maW5kKCAoY29udHJvbCkgPT4gY29udHJvbC5pZA0KICAgICAgLy8gPT09IHNlbGVjdGVkQ29udHJvbElkLCApfQ0KICAgICAgLy8gdmFyIGN1cnJlbnRDb250cm9sID0gY29udHJvbENvbGxlY3Rpb25zLmZpbmQoKGNvbnRyb2wpPT57DQogICAgICAvLyAgIGNvbnRyb2wuaWQgPT0NCiAgICAgIC8vIH0pDQogICAgICB2YXIgY3VycmVudENvbnRyb2wgPSB0aGlzLmNvbnRyb2xDb2xsZWN0aW9ucy5maW5kKA0KICAgICAgICAoY29udHJvbCkgPT4gY29udHJvbC5pZCA9PT0gdGhpcy5zZWxlY3RDb250cm9sSUQNCiAgICAgICk7DQogICAgICByZXR1cm4gY3VycmVudENvbnRyb2w7DQogICAgfSwNCiAgICBjb250cm9sUmVuZGVyKCkgew0KICAgICAgLy8gcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLlBERk11dGF0aW9uLmNvbnRyb2xSZW5kZXJlZDsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5QREZNdXRhdGlvbi5jb250cm9sUmVuZGVyZWQ7DQogICAgfSwNCiAgICB0YWtlTG9hZGluZ1N0YXR1cygpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5QREZNdXRhdGlvbi5sb2FkaW5nOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgVGVtcGxhdGVBUEkuZ2V0KHsgaWQ6IHRoaXMudGVtcGxhdGVJRCB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgLy8gY29uc29sZS5sb2coImdldCB0ZW1wbGF0ZSByZXNwb25zZSIsIHJlc3BvbnNlKTsNCiAgICAgIHRoaXMuY29udHJvbENvbGxlY3Rpb25zID0gcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZVswXS5jb250cm9scyB8fCBbXTsNCiAgICAgIHRoaXMudGVtcGxhdGVJbmZvID0gcmVzcG9uc2UuZGF0YS50ZW1wbGF0ZVswXTsNCiAgICB9KTsNCg0KICAgIC8vIGNvbnNvbGUubG9nKCJUSElTIFBBUkFNIEVESVQiLCB0aGlzLiRyb3V0ZXIucGFyYW1zLnRlbXBsYXRlSUQpOw0KICB9LA0KICBkYXRhKCkgew0KICAgIC8vIGRyYWdJdGVtQ2xhc3MgPSAid3ZzLWRyYWdnYWJsZSI7DQogICAgLy8gZHJvcEl0ZW1DbGFzcyA9ICJmdl9fcGRmLXBhZ2UtaGFuZGxlci1jb250YWluZXIiOw0KICAgIHJldHVybiB7DQogICAgICAvLyBjb250cm9sUmVuZGVyOiB0aGlzLiRzdG9yZS5zdGF0ZS5QREZNdXRhdGlvbi5jb250cm9sUmVuZGVyZWQsDQogICAgICBwZGZMb2FkZWQ6IHRoaXMuJHN0b3JlLnN0YXRlLlBERk11dGF0aW9uLnBkZkxvYWRlZCwNCiAgICAgIG9wZW5Jbml0SW50ZXJhY3Q6IGZhbHNlLA0KICAgICAgY29udHJvbENvbGxlY3Rpb25zOiBbXSwNCiAgICAgIHBkZkZpbGU6ICIiLA0KICAgICAgdGVtcGxhdGVJRDogdGhpcy4kcm91dGUucXVlcnkudGVtcGxhdGVJRCwNCiAgICAgIHRlbXBsYXRlSW5mbzogIiIsDQogICAgICBydWxlc0VtYWlsOiBbDQogICAgICAgICh2YWx1ZSkgPT4gISF2YWx1ZSB8fCAiUmVxdWlyZWQuIiwNCiAgICAgICAgKHZhbHVlKSA9PiAodmFsdWUgfHwgIiIpLmxlbmd0aCA8PSAyMCB8fCAiTWF4IDIwIGNoYXJhY3RlcnMiLA0KICAgICAgICAodmFsdWUpID0+IHsNCiAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gL14oKFtePD4oKVtcXVxcLiw7OlxzQCJdKyhcLltePD4oKVtcXVxcLiw7OlxzQCJdKykqKXwoIi4rIikpQCgoXFtbMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLH0pKSQvOw0KICAgICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QodmFsdWUpIHx8ICJJbnZhbGlkIGUtbWFpbC4iOw0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICAgIHJ1bGVzUGhvbmU6IFsNCiAgICAgICAgKHZhbHVlKSA9PiAhIXZhbHVlIHx8ICJSZXF1aXJlZC4iLA0KICAgICAgICAodmFsdWUpID0+ICh2YWx1ZSB8fCAiIikubGVuZ3RoIDw9IDEzIHx8ICJNYXggUGhvbmUgTnVtYmVyIDExIiwNCiAgICAgICAgKHZhbHVlKSA9PiB7DQogICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoIis4MSIpICE9PSAtMSkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coIkZpbmQgKyA4MSIpOw0KICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaW5kZXhPZigiKzg0IikgIT09IC0xKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiRmluZCArIDg0Iik7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAiUGxlYXNlIElucHV0IEFyZWEgTnVtYmVyIjsNCiAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICBdLA0KDQogICAgICAvLyBsb2FkaW5nRGlhbG9nOiB0aGlzLiRzdG9yZS5zdGF0ZS5QREZNdXRhdGlvbi5sb2FkaW5nLA0KICAgICAgLy8gbG9hZGluZzogdGhpcy50YWtlTG9hZGluZ1N0YXR1cywNCiAgICAgIC8vRklYTUU6DQogICAgICBzaG93Q29udHJvbFNldHRpbmc6IGZhbHNlLA0KICAgICAgdXNlclNpZ25lcjogW10sDQogICAgICBEb3VibGVGYWN0b3JfQXV0aGVudGljYXRlOiB0cnVlLA0KICAgICAgZm9ybURhdGFJbnB1dDoge30sDQogICAgICBmb3JtRGF0YToge30sDQogICAgICBzaG93U2lnbmVyT3JkZXI6IGZhbHNlLA0KICAgICAgZGlhbG9nSW5wdXRGaWVsZDogZmFsc2UsDQogICAgICBkaWFsb2dWaWRlb0ZpZWxkOiBmYWxzZSwNCiAgICAgIGVuYWxibGVTaWduRG9jOiB0cnVlLA0KICAgICAgZGlhbG9nOiBmYWxzZSwNCiAgICAgIHdpZHRoV2luZG93OiAwLA0KICAgICAgc2VsZWN0Q29udHJvbFJlY3Q6IG51bGwsDQogICAgICBzZWxlY3RDb250cm9sRWxlbWVudDogbnVsbCwNCiAgICAgIHBkZlZpZXc6IG51bGwsDQogICAgICBwZGZEb2M6IG51bGwsDQogICAgICBmaWxlOiBudWxsLA0KICAgICAgcGFnZVJlbmRlcjoge30sDQogICAgICB0ZW1wbGF0ZUNyZWF0ZToge30sDQogICAgICBzZWxlY3RDb250cm9sSUQ6ICIiLA0KICAgICAgLy8gd2luZG93U2l6ZTogWzAsIDBdLA0KICAgICAgLy8gY29uc3QgW3dpbmRvd1NpemUsIHNldFdpbmRvd1NpemVdID0gdXNlU3RhdGUoWzAsIDBdKTsNCiAgICB9Ow0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgLy8gY29udHJvbENvbGxlY3Rpb25zKHZhbHVlKSB7DQogICAgLy8gICBjb25zb2xlLmxvZygiY29udHJvbCBjb2xsZWN0aW9uIGNhbGwgd2F0Y2giLCB2YWx1ZSk7DQogICAgLy8gfSwNCiAgICB0ZW1wbGF0ZUluZm8odmFsdWUpIHsNCiAgICAgIFRlbXBsYXRlQVBJLmdldFRlbXBsYXRlRG9jKHsgZG9jOiB2YWx1ZS5wYXRoIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMucGRmRmlsZSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICB9KTsNCiAgICB9LA0KICAgIHNob3dTaWduZXJPcmRlcihuZXdWYWx1ZSkgew0KICAgICAgdmFyIG1hbmFnZXJfU3dpdGNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgNCiAgICAgICAgInd2cy1kZXNpZ24tY29udHJvbC1oZWFkZXIiDQogICAgICApOw0KICAgICAgdmFyIGNvbnRyb2xMYXlvdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ3cmFwcGVyLWNvbnRyb2wiKTsNCiAgICAgIHZhciBzaWduZXJMYXlvdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzaWduZXItb3JkZXIiKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKA0KICAgICAgLy8gICAic2lnbmVyT3JkZXJFbGVtZW50IiwNCiAgICAgIC8vICk7DQogICAgICBpZiAobmV3VmFsdWUgPT09IHRydWUpIHsNCiAgICAgICAgbWFuYWdlcl9Td2l0Y2hbMF0uZmlyc3RDaGlsZC5zdHlsZS5ib3JkZXJCb3R0b20gPSAiM3B4IHNvbGlkICNjY2NjY2MiOw0KICAgICAgICBtYW5hZ2VyX1N3aXRjaFswXS5sYXN0Q2hpbGQuc3R5bGUuYm9yZGVyQm90dG9tID0gIjNweCBzb2xpZCAjZmZiODRkIjsNCiAgICAgICAgY29udHJvbExheW91dFswXS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICBzaWduZXJMYXlvdXRbMF0uc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtYW5hZ2VyX1N3aXRjaFswXS5sYXN0Q2hpbGQuc3R5bGUuYm9yZGVyQm90dG9tID0gIjNweCBzb2xpZCAjY2NjY2NjIjsNCiAgICAgICAgbWFuYWdlcl9Td2l0Y2hbMF0uZmlyc3RDaGlsZC5zdHlsZS5ib3JkZXJCb3R0b20gPSAiM3B4IHNvbGlkICNmZmI4NGQiOw0KICAgICAgICBjb250cm9sTGF5b3V0WzBdLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICBzaWduZXJMYXlvdXRbMF0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICAvLyBtZXRob2RzOiB7DQogIC8vICAgbXlFdmVudEhhbmRsZXIoZSkgew0KICAvLyAgICAgLy8geW91ciBjb2RlIGZvciBoYW5kbGluZyByZXNpemUuLi4NCiAgLy8gICB9DQogIC8vIH0NCg0KICBtZXRob2RzOiB7DQogICAgLy8gcmVzaXplSGFuZGxlcihldmVudCkgew0KICAgIC8vICAgLy8gY29uc29sZS5sb2coIndpbmRvdyByZXNpemUiLCBldmVudCk7DQogICAgLy8gfSwNCiAgICAvLyBwYXJlbnRNZXRob2RzKGFyZ3VtZW50KSB7DQogICAgLy8gICBjb25zb2xlLmxvZygicGFyZW50IG1ldGhvZCBjYWxsICEhIiwgYXJndW1lbnQpOw0KICAgIC8vIH0sDQogICAgb25BcHByb3ZlKGUpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJPTiBBUFBST1ZFIENBTEwgISEhIiwgZSk7DQogICAgICB0aGlzLnVzZXJTaWduZXIucHVzaChlKTsNCg0KICAgICAgdGhpcy5zaG93Q29udHJvbFNldHRpbmcgPSBmYWxzZTsNCiAgICB9LA0KICAgIG9uUmVqZWN0KCkgew0KICAgICAgY29uc29sZS5sb2coIk9OIFJFSkVDVCBDQUxMICEhISIpOw0KICAgICAgdGhpcy5zaG93Q29udHJvbFNldHRpbmcgPSBmYWxzZTsNCiAgICB9LA0KDQogICAgb25IYW5kbGVVcGRhdGVUZW1wbGF0ZSgpIHsNCiAgICAgIC8vIHRoaXMudGVtcGxhdGVJRDsNCiAgICAgIC8vIHRoaXMuY29udHJvbENvbGxlY3Rpb25zOw0KICAgICAgdGhpcy5mb3JtRGF0YS5pZCA9IHRoaXMudGVtcGxhdGVJRDsNCiAgICAgIHRoaXMuZm9ybURhdGEuY29udHJvbHMgPSB0aGlzLmNvbnRyb2xDb2xsZWN0aW9uczsNCiAgICAgIGNvbnNvbGUubG9nKCJGT1JNIElEIFVQREFURSIsIHRoaXMuZm9ybURhdGEuaWQpOw0KICAgICAgY29uc29sZS5sb2coIkZPUk0gQ09OVFJPTFMgVVBEQVRFIiwgdGhpcy5mb3JtRGF0YS5jb250cm9scyk7DQogICAgICBUZW1wbGF0ZUFQSS51cGRhdGUodGhpcy5mb3JtRGF0YSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coIlVQREFURSBSRVNQT05TRSAhISEiLCByZXNwb25zZSk7DQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gInN1Y2Nlc3MiKSB7DQogICAgICAgICAgdGhpcy4kc3dhbCh7DQogICAgICAgICAgICB0aXRsZTogIlVwZGF0ZSBUZW1wbGF0ZSBTdWNjZXNzICIsDQogICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsDQogICAgICAgICAgICB0aW1lcjogMjAwMCwNCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRzd2FsKHsNCiAgICAgICAgICAgIHRpdGxlOiAiVXBkYXRlIFRlbXBsYXRlIEZhaWwgIiwNCiAgICAgICAgICAgIGljb246ICJlcnJvciIsDQogICAgICAgICAgICB0aW1lcjogMjAwMCwNCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIG9uR2V0Rm9ybUlucHV0KGV2ZW50LCB0eXBlLCBuYW1lRmllbGQpIHsNCiAgICAgIHN3aXRjaCAodHlwZSkgew0KICAgICAgICBjYXNlICJWSURFT19DT05UUk9MX0ZPUk0iOiB7DQogICAgICAgICAgdGhpcy5mb3JtRGF0YUlucHV0LnZpZGVvQ29udHJvbCA9IHsNCiAgICAgICAgICAgIC4uLnRoaXMuZm9ybURhdGFJbnB1dC52aWRlb0NvbnRyb2wsDQogICAgICAgICAgICBbbmFtZUZpZWxkXTogZXZlbnQsDQogICAgICAgICAgfTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBkZWZhdWx0OiB7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIG9uU3VibWl0Rm9ybShldmVudCwgdHlwZSkgew0KICAgICAgc3dpdGNoICh0eXBlKSB7DQogICAgICAgIGNhc2UgIlZJREVPX1NJR05BVFVSRSI6IHsNCiAgICAgICAgICB0aGlzLmRpYWxvZ1ZpZGVvRmllbGQgPSBmYWxzZTsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICAhdGhpcy5mb3JtRGF0YUlucHV0LnZpZGVvQ29udHJvbC5waG9uZSAmJg0KICAgICAgICAgICAgdGhpcy5Eb3VibGVGYWN0b3JfQXV0aGVudGljYXRlID09PSBmYWxzZQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coIlBsZWFzZSBJbnB1dCBQaG9uZSBGaWVsZCBPZiBWaWRlbyBDT250cm9sIik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhSW5wdXQudmlkZW9Db250cm9sLmVtYWlsKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiUGxlYXNlIElucHV0IEVtYWlsIEZpZWxkIE9mIFZpZGVvIENvbnRyb2wiKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gdGhpcy51c2VyU2lnbmVyLnB1c2godGhpcy5mb3JtRGF0YUlucHV0LnZpZGVvQ29udHJvbC5lbWFpbCk7DQogICAgICAgICAgICAvLyB0aGlzLnVzZXJTaWduZXIgPSB0aGlzLmZvcm1EYXRhSW5wdXQudmlkZW9Db250cm9sLmVtYWlsOw0KICAgICAgICAgICAgLy8gdGhpcy51c2VyU2lnbmVyLnB1c2godGhpcy5mb3JtRGF0YUlucHV0LnZpZGVvQ29udHJvbC5lbWFpbCk7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiRkxBRyAhISEiKTsNCiAgICAgICAgICAgIC8vIHRoaXMudXNlclNpZ25lciA9IHRoaXMuZm9ybURhdGFJbnB1dC52aWRlb0NvbnRyb2wuZW1haWw7DQogICAgICAgICAgICB0aGlzLnVzZXJTaWduZXIucHVzaCh0aGlzLmZvcm1EYXRhSW5wdXQudmlkZW9Db250cm9sLmVtYWlsKTsNCiAgICAgICAgICAgIC8vIHRoaXMudXNlclNpZ25lciA9IHRoaXMuZm9ybURhdGFJbnB1dC52aWRlb0NvbnRyb2wuZW1haWw7DQogICAgICAgICAgICAvLyB0aGlzLnVzZXJTaWduZXIoew0KICAgICAgICAgICAgLy8gICAuLi50aGlzLnVzZXJTaWduZXIsDQogICAgICAgICAgICAvLyAgIHVzZXI6IHRoaXMudXNlclNpZ25lciwNCiAgICAgICAgICAgIC8vIH0pOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIlVTRVIgU0lHTkVSICEhISIsIHRoaXMudXNlclNpZ25lcik7DQoNCiAgICAgICAgICAgIC8vIHRoaXMudXNlclNpZ25lciA9IHRoaXMuZm9ybURhdGFJbnB1dC52aWRlb0NvbnRyb2wuZW1haWw7DQogICAgICAgICAgICAvLyB2YXIgYSA9IE9iamVjdC5hc3NpZ24oDQogICAgICAgICAgICAvLyAgIHRoaXMudXNlclNpZ25lciwNCiAgICAgICAgICAgIC8vICAgdGhpcy5mb3JtRGF0YUlucHV0LnZpZGVvQ29udHJvbC5lbWFpbA0KICAgICAgICAgICAgLy8gKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJBYWEiLCBhKTsNCiAgICAgICAgICAgIC8vIE9iamVjdC5hc3NpZ24odGhpcy50ZW1wbGF0ZUNyZWF0ZSwgdGVtcE9iamVjdCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBvbkhhbmRsZVVwbG9hZEZpbGUoZmlsZVVwbG9hZCkgew0KICAgICAgaWYgKCFmaWxlVXBsb2FkKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZmlsZSA9IGZpbGVVcGxvYWQ7DQogICAgICB9DQogICAgfSwNCiAgICBvbkhhbmRsZUNyZWF0ZShwYXJhKSB7DQogICAgICBpZiAoIXBhcmEpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgfSwNCiAgICBvbkhhbmRsZUNhbmNlbChldmVudCkgew0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFsNCiAgICAgICAgLy8gUGRmQWN0aW9uLnJlbW92ZUFsbENvbnRyb2xQREYoKSwNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiLyIgfSksDQogICAgICBdKTsNCg0KICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiLyIgfSk7DQogICAgICAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaChbRmlsZUFjdGlvbi5yZW1vdmVGaWxlKCksIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi8iIH0pXSk7DQogICAgfSwNCg0KICAgIGFzeW5jIG9uRHJvcENvbnRyb2xIYW5kbGVETkQoY29udHJvbCwgZWxlbWVudCkgew0KICAgICAgdmFyIHBhZ2VSZW5kZXJlciA9IHRoaXMucGRmVmlldy5nZXRQREZQYWdlUmVuZGVyKGNvbnRyb2wucGFnZU5vKTsNCiAgICAgIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgIC8vdGhpcyBpcyByZWN0YW5nbGUgb2YgZHJhZyBpdGVtDQogICAgICB0aGlzLnNlbGVjdENvbnRyb2xSZWN0ID0gcmVjdDsNCiAgICAgIGlmICghY29udHJvbC5pZCkgew0KICAgICAgICAvL05FVyBDT05UUk9MDQogICAgICAgIGNvbnRyb2wuaWQgPSB1dWlkdjQoKTsNCiAgICAgICAgY29udHJvbC5zY2FsZSA9IHBhZ2VSZW5kZXJlci5zY2FsZTsNCiAgICAgICAgY29udHJvbC5wYWdlUmVjdCA9IGF3YWl0IFBERkhlbHBlci5kZXZpY2VSZWN0VG9QYWdlUmVjdCgNCiAgICAgICAgICBwYWdlUmVuZGVyZXIsDQogICAgICAgICAgY29udHJvbC5kZXZpY2VSZWN0LA0KICAgICAgICAgIGNvbnRyb2wuc2NhbGUNCiAgICAgICAgKTsNCiAgICAgICAgLy8gdGhpcy5jb250cm9sQ29sbGVjdGlvbnMucHVzaChjb250cm9sKTsNCiAgICAgICAgLy8gUGRmQWN0aW9uLmFkZENvbnRyb2xUb1BERihjb250cm9sKTsNCiAgICAgICAgdGhpcy5jb250cm9sQ29sbGVjdGlvbnMucHVzaChjb250cm9sKTsNCg0KICAgICAgICBlbGVtZW50LmlkID0gY29udHJvbC5pZDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vSUYgRVhJU1QgQ09OVFJPTCBJVCdTIE1FQU4gVVNFUiBFRElUIERSQUcgSVRFTQ0KICAgICAgICAvL0FORCBXRSBNVVNUIFVQREFURSBDT09SRElOQVRFIE9GIERSQUcgSVRFTSBVU0VSIEhBUyBCRUVOIERST1AgISEhISENCiAgICAgICAgLy9JTVBPUlRBTlQNCiAgICAgICAgY29uc3QgZm91bmQgPSB0aGlzLmNvbnRyb2xDb2xsZWN0aW9ucy5maW5kKA0KICAgICAgICAgIChpdGVtKSA9PiBpdGVtLmlkID09PSBjb250cm9sLmlkDQogICAgICAgICk7DQogICAgICAgIGZvdW5kLnNjYWxlID0gcGFnZVJlbmRlcmVyLnNjYWxlOw0KICAgICAgICBmb3VuZC5kZXZpY2VSZWN0ID0gY29udHJvbC5kZXZpY2VSZWN0Ow0KICAgICAgICBmb3VuZC5wYWdlUmVjdCA9IGF3YWl0IFBERkhlbHBlci5kZXZpY2VSZWN0VG9QYWdlUmVjdCgNCiAgICAgICAgICBwYWdlUmVuZGVyZXIsDQogICAgICAgICAgY29udHJvbC5kZXZpY2VSZWN0LA0KICAgICAgICAgIGNvbnRyb2wuc2NhbGUNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uRHJhZ0NvbnRyb2xIYW5kbGVETkQoZHJhZ0VsZW1lbnQpIHsNCiAgICAgIGNvbnN0IHJlY3QgPSBkcmFnRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgIHRoaXMuc2VsZWN0Q29udHJvbFJlY3QgPSByZWN0Ow0KICAgICAgdGhpcy5zZWxlY3RDb250cm9sRWxlbWVudCA9IGRyYWdFbGVtZW50Ow0KICAgIH0sDQogICAgb25UYWtlVGVtcGxhdGVOYW1lKGV2ZW50KSB7DQogICAgICB2YXIgdGVtcE9iamVjdCA9IHsNCiAgICAgICAgbmFtZTogZXZlbnQsDQogICAgICAgIGZpbGU6IHRoaXMuZmlsZSwNCiAgICAgICAgY29udHJvbHM6IHRoaXMuY29udHJvbENvbGxlY3Rpb25zLA0KICAgICAgICAvLyBjb250cm9sczogSlNPTi5zdHJpbmdpZnkodGhpcy5jb250cm9sQ29sbGVjdGlvbnMpLA0KICAgICAgfTsNCiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy50ZW1wbGF0ZUNyZWF0ZSwgdGVtcE9iamVjdCk7DQogICAgfSwNCg0KICAgIG9uT3BlblN1Y2Nlc3MoZG9jKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygib24gb3BlbiBzdWNjZXNzICIsIGRvYyk7DQogICAgICB0aGlzLnBkZkRvYyA9IGRvYzsNCiAgICB9LA0KICAgIG9uQ29tcGxldGUoZG9jKSB7DQogICAgICB0aGlzLnBkZkRvYyA9IGRvYzsNCiAgICB9LA0KICAgIG9uUmVuZGVyUGFnZVN1Y2Nlc3MocmVuZGVyKSB7DQogICAgICB0aGlzLnBhZ2VSZW5kZXIgPSByZW5kZXI7DQogICAgfSwNCiAgICBvbkluaXRTdWNjZXNzKHBkZnZpZXcpIHsNCiAgICAgIHRoaXMucGRmVmlldyA9IHBkZnZpZXc7DQogICAgfSwNCg0KICAgIG9uQ3JlYXRlVGVtcGxhdGUoZXZlbnQpIHsNCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOw0KICAgIH0sDQogICAgb25DbG9zZVRlbXBsYXRlKCkgew0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7DQogICAgfSwNCiAgICBvbkhhbmRsZUVuYWJsZVNpZ25Eb2MoKSB7DQogICAgICB0aGlzLmVuYWxibGVTaWduRG9jID0gZmFsc2U7DQogICAgfSwNCiAgICBhc3luYyBvbkNvb3JkaW5hdGVDb250cm9sQ2hhbmdlKGtleSwgdmFsdWUpIHsNCiAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5jb250cm9sQ29sbGVjdGlvbnMuZmluZCgNCiAgICAgICAgKGl0ZW0pID0+IGl0ZW0uaWQgPT09IHRoaXMuc2VsZWN0Q29udHJvbEVsZW1lbnQuaWQNCiAgICAgICk7DQogICAgICB2YXIgcGRmVmlld2VyID0gdGhpcy5wZGZWaWV3Ow0KICAgICAgdmFyIHBhZ2VSZW5kZXJlciA9IGF3YWl0IHBkZlZpZXdlci5nZXRQREZQYWdlUmVuZGVyKGZvdW5kLnBhZ2VObyk7DQogICAgICBmb3VuZC5zY2FsZSA9IHBhZ2VSZW5kZXJlci5nZXRTY2FsZSgpOw0KDQogICAgICB2YXIgdmFsdWVUb0ludCA9IHBhcnNlSW50KHZhbHVlKTsNCiAgICAgIHN3aXRjaCAoa2V5KSB7DQogICAgICAgIGNhc2UgIngiOiB7DQogICAgICAgICAgdGhpcy5zZWxlY3RDb250cm9sUmVjdC54ID0gdmFsdWVUb0ludDsNCiAgICAgICAgICB0aGlzLnNlbGVjdENvbnRyb2xFbGVtZW50LnN0eWxlLmxlZnQgPSB2YWx1ZVRvSW50ICsgInB4IjsNCiAgICAgICAgICBmb3VuZC5kZXZpY2VSZWN0LmxlZnQgPSB2YWx1ZVRvSW50Ow0KICAgICAgICAgIGZvdW5kLmRldmljZVJlY3QucmlnaHQgPQ0KICAgICAgICAgICAgZm91bmQuZGV2aWNlUmVjdC5sZWZ0ICsgZm91bmQuZGV2aWNlUmVjdC53aWR0aDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBjYXNlICJ5Ijogew0KICAgICAgICAgIHRoaXMuc2VsZWN0Q29udHJvbFJlY3QueSA9IHZhbHVlVG9JbnQ7DQogICAgICAgICAgdGhpcy5zZWxlY3RDb250cm9sRWxlbWVudC5zdHlsZS50b3AgPSB2YWx1ZVRvSW50ICsgInB4IjsNCiAgICAgICAgICBmb3VuZC5kZXZpY2VSZWN0LnRvcCA9IHZhbHVlVG9JbnQ7DQogICAgICAgICAgZm91bmQuZGV2aWNlUmVjdC5ib3R0b20gPQ0KICAgICAgICAgICAgZm91bmQuZGV2aWNlUmVjdC50b3AgKyBmb3VuZC5kZXZpY2VSZWN0LmhlaWdodDsNCg0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIGNhc2UgIndpZHRoIjogew0KICAgICAgICAgIHRoaXMuc2VsZWN0Q29udHJvbFJlY3Qud2lkdGggPSB2YWx1ZVRvSW50Ow0KICAgICAgICAgIHRoaXMuc2VsZWN0Q29udHJvbEVsZW1lbnQuc3R5bGUud2lkdGggPSB2YWx1ZVRvSW50ICsgInB4IjsNCiAgICAgICAgICBmb3VuZC5kZXZpY2VSZWN0LndpZHRoID0gdmFsdWVUb0ludDsNCiAgICAgICAgICBmb3VuZC5kZXZpY2VSZWN0LnJpZ2h0ID0gZm91bmQuZGV2aWNlUmVjdC5sZWZ0ICsgdmFsdWVUb0ludDsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBjYXNlICJoZWlnaHQiOiB7DQogICAgICAgICAgdGhpcy5zZWxlY3RDb250cm9sUmVjdC5oZWlnaHQgPSB2YWx1ZVRvSW50Ow0KICAgICAgICAgIHRoaXMuc2VsZWN0Q29udHJvbEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdmFsdWVUb0ludCArICJweCI7DQogICAgICAgICAgZm91bmQuZGV2aWNlUmVjdC5oZWlnaHQgPSB2YWx1ZVRvSW50Ow0KICAgICAgICAgIGZvdW5kLmRldmljZVJlY3QuYm90dG9tID0gZm91bmQuZGV2aWNlUmVjdC50b3AgKyB2YWx1ZVRvSW50Ow0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGZvdW5kLnBhZ2VSZWN0ID0gYXdhaXQgUERGSGVscGVyLmRldmljZVJlY3RUb1BhZ2VSZWN0KA0KICAgICAgICBwYWdlUmVuZGVyZXIsDQogICAgICAgIGZvdW5kLmRldmljZVJlY3QNCiAgICAgICk7DQogICAgfSwNCg0KICAgIHRvUGFnZVJlY3QoZWxlbWVudCkgew0KICAgICAgdmFyIGRyb3BFbGVtZW50ID0gZWxlbWVudDsNCiAgICAgIC8vdGhpcyBpcyBkcmFnIGl0ZW0NCiAgICAgIHZhciBkcm9wWm9uZSA9IGVsZW1lbnQucGFyZW50Tm9kZTsNCiAgICAgIHZhciBkcmFnSXRlbVJlY3QgPSBkcm9wRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgIHZhciBkcm9wWm9uZVJlY3QgPSBkcm9wWm9uZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsNCiAgICAgIHZhciBvZmZzZXRSZWN0ID0gew0KICAgICAgICBsZWZ0OiBkcmFnSXRlbVJlY3QubGVmdCAtIGRyb3Bab25lUmVjdC5sZWZ0LA0KICAgICAgICB0b3A6IGRyYWdJdGVtUmVjdC50b3AgLSBkcm9wWm9uZVJlY3QudG9wLA0KICAgICAgICByaWdodDogZHJhZ0l0ZW1SZWN0LmxlZnQgLSBkcm9wWm9uZVJlY3QubGVmdCArIGRyYWdJdGVtUmVjdC53aWR0aCwNCiAgICAgICAgYm90dG9tOiBkcmFnSXRlbVJlY3QudG9wIC0gZHJvcFpvbmVSZWN0LnRvcCArIGRyYWdJdGVtUmVjdC5oZWlnaHQsDQogICAgICAgIHdpZHRoOiBkcmFnSXRlbVJlY3Qud2lkdGgsDQogICAgICAgIGhlaWdodDogZHJhZ0l0ZW1SZWN0LmhlaWdodCwNCiAgICAgIH07DQogICAgICBvZmZzZXRSZWN0LnggPSBvZmZzZXRSZWN0LmxlZnQ7DQogICAgICBvZmZzZXRSZWN0LnkgPSBvZmZzZXRSZWN0LnRvcDsNCiAgICAgIHJldHVybiBvZmZzZXRSZWN0Ow0KICAgIH0sDQogICAgb25UYWtlQ2hhbmdlVmFsdWVDb29yZGluYXRlKGtleSwgZXZlbnQpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKCJ0YWtlIGNoYW5nZSAoMikiLCBldmVudC50YXJnZXQudmFsdWUpOw0KICAgICAgdGhpcy5vbkNvb3JkaW5hdGVDb250cm9sQ2hhbmdlKGtleSwgZXZlbnQudGFyZ2V0LnZhbHVlKTsNCiAgICB9LA0KICAgIGFzeW5jIG9uQ29udHJvbFJlc2l6ZWQoY29udHJvbCkgew0KICAgICAgdmFyIHBkZlZpZXdlciA9IHRoaXMucGRmdmlldzsNCiAgICAgIHZhciBwYWdlUmVuZGVyZXIgPSBhd2FpdCBwZGZWaWV3ZXIuZ2V0UERGUGFnZVJlbmRlcihjb250cm9sLnBhZ2VObyk7DQogICAgICBjb25zdCBmb3VuZCA9IHRoaXMuY29udHJvbENvbGxlY3Rpb25zLmZpbmQoDQogICAgICAgIChpdGVtKSA9PiBpdGVtLmlkID09PSBjb250cm9sLmlkDQogICAgICApOw0KICAgICAgZm91bmQuc2NhbGUgPSBwYWdlUmVuZGVyZXIuZ2V0U2NhbGUoKTsNCiAgICAgIGZvdW5kLmRldmljZVJlY3QgPSBjb250cm9sLmRldmljZVJlY3Q7DQogICAgICBmb3VuZC5wYWdlUmVjdCA9IGF3YWl0IFBERkhlbHBlci5kZXZpY2VSZWN0VG9QYWdlUmVjdCgNCiAgICAgICAgcGFnZVJlbmRlcmVyLA0KICAgICAgICBjb250cm9sLmRldmljZVJlY3QNCiAgICAgICk7DQogICAgfSwNCiAgICBvbkNvbnRyb2xDbGljayhldmVudCkgew0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0Ow0KICAgICAgdmFyIHJlY3QgPSB0aGlzLnRvUGFnZVJlY3QoZWxlbWVudCk7DQogICAgICB0aGlzLnNlbGVjdENvbnRyb2xSZWN0ID0gcmVjdDsNCiAgICAgIHRoaXMuc2VsZWN0Q29udHJvbEVsZW1lbnQgPSBlbGVtZW50Ow0KICAgIH0sDQoNCiAgICBvbkNvbnRyb2xEb3VibGVDbGljayhldmVudCkgew0KICAgICAgY29uc29sZS5sb2coIk9OIENPTlRST0wgRE9VQkxFIENMSUNLIENBTEwgISEiKTsNCg0KICAgICAgLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7DQogICAgICAvLyB2YXIgdHlwZUNvbnRyb2wgPSB0YXJnZXQuYXR0cmlidXRlcy5kYXRhVHlwZS5ub2RlVmFsdWU7DQogICAgICAvLyB2YXIgdHlwZUNvbnRyb2wgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRhLXR5cGUiKTsNCiAgICAgIHZhciBjb250cm9sSUQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJpZCIpOw0KICAgICAgdGhpcy5zZWxlY3RDb250cm9sSUQgPSBjb250cm9sSUQ7DQogICAgICAvLyB2YXIgZm9ybURhdGFDb250cm9sID0gew0KICAgICAgLy8gICBpZDogY29udHJvbElELA0KICAgICAgLy8gICB0eXBlOiB0eXBlQ29udHJvbCwNCiAgICAgIC8vIH07DQogICAgICAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaChNb2RhbE9yZGVyQWN0aW9uLnNob3dNb2RhbE9yZGVyKGZvcm1EYXRhQ29udHJvbCkpOw0KICAgICAgLy8gdGhpcy5zaG93Q29udHJvbFNldHRpbmcgPSB0cnVlOw0KICAgICAgdGhpcy5zaG93Q29udHJvbFNldHRpbmcgPSB0cnVlOw0KDQogICAgICAvLyBzd2l0Y2ggKHR5cGVDb250cm9sKSB7DQogICAgICAvLyAgIGNhc2UgInd2cy12aWRlbyI6IHsNCg0KICAgICAgLy8gICAgIHRoaXMuZGlhbG9nVmlkZW9GaWVsZCA9IHRydWU7DQogICAgICAvLyAgICAgYnJlYWs7DQogICAgICAvLyAgIH0NCiAgICAgIC8vICAgY2FzZSAid3ZzLXRleHQiOiB7DQogICAgICAvLyAgICAgdGhpcy5kaWFsb2dJbnB1dEZpZWxkID0gdHJ1ZTsNCiAgICAgIC8vICAgICBicmVhazsNCiAgICAgIC8vICAgfQ0KDQogICAgICAvLyAgIGNhc2UgInd2cy1jaGVjayI6IHsNCiAgICAgIC8vICAgICB0aGlzLmRpYWxvZ0lucHV0RmllbGQgPSB0cnVlOw0KDQogICAgICAvLyAgICAgYnJlYWs7DQogICAgICAvLyAgIH0NCiAgICAgIC8vICAgZGVmYXVsdDogew0KICAgICAgLy8gICAgIGJyZWFrOw0KICAgICAgLy8gICB9DQogICAgICAvLyB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["template-edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"template-edit.vue","sourceRoot":"src/views/Template","sourcesContent":["\r\n\r\n\r\n<template >\r\n  <div class=\"template-create-wrapper\">\r\n    <div class=\"template-create-content\">\r\n      <div class=\"template-create-content-header\">\r\n        <!-- <v-btn class=\"btn\" color=\"primary\" elevation=\"2\" medium>Create</v-btn> -->\r\n        <!-- <v-dialog v-model=\"dialog\" persistent max-width=\"600\"> -->\r\n        <!-- <template v-slot:activator=\"{ on, attrs }\"> -->\r\n\r\n        <v-btn color=\"primary\" dark @click=\"onHandleUpdateTemplate\">\r\n          Update Template\r\n        </v-btn>\r\n\r\n        <v-btn color=\"primary\" dark @click=\"openInitInteract = true\">\r\n          Init Interact\r\n        </v-btn>\r\n\r\n        <!-- </template> -->\r\n        <!-- <v-card>\r\n            <v-card-title class=\"headline\"> Template Name </v-card-title>\r\n            <v-card-text>\r\n              <v-text-field label=\"Name\"></v-text-field>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn color=\"green darken-1\" text> Cancel </v-btn>\r\n              <v-btn color=\"green darken-1\" text> OK </v-btn>\r\n            </v-card-actions>\r\n          </v-card> -->\r\n        <!-- </v-dialog> -->\r\n\r\n        <v-btn\r\n          class=\"btn\"\r\n          color=\"secondary\"\r\n          elevation=\"2\"\r\n          medium\r\n          @click=\"onHandleCancel($event)\"\r\n          >Cancel</v-btn\r\n        >\r\n        <v-btn :disabled=\"enalbleSignDoc\" medium color=\"success\"\r\n          >Make Sign Doc</v-btn\r\n        >\r\n      </div>\r\n\r\n      <div class=\"template-create-content-body\">\r\n        <!-- FIXME:/// -->\r\n        <!-- :file=\"this.testFile[0].file\" -->\r\n\r\n        <div class=\"view-pdf\" id=\"content-container\">\r\n          <WVSPDFViewComponent\r\n            v-if=\"pdfFile\"\r\n            :file=\"this.pdfFile\"\r\n            viewerContainer=\"content-container\"\r\n            :control=\"this.controlCollections\"\r\n          />\r\n          <DNDInteractComponent\r\n            dragItemClass=\"wvs-draggable\"\r\n            dropItemClass=\"fv__pdf-page-handler-container\"\r\n          />\r\n          <!-- v-if=\"this.controlRender === true\" -->\r\n          <!-- v-if=\"openInitInteract\" -->\r\n          <!-- v-if=\"this.controlRender === true && pdfLoaded === false\" -->\r\n        </div>\r\n\r\n        <div class=\"wvs-design-control\">\r\n          <div class=\"wvs-design-control-title\">\r\n            <span>CONTROL ASSIGN</span>\r\n          </div>\r\n          <div class=\"wvs-design-control-header\">\r\n            <span @click=\"showSignerOrder = false\">Controls</span>\r\n            <span @click=\"showSignerOrder = true\">Signer Order</span>\r\n          </div>\r\n          <div class=\"wrapper-control\">\r\n            <div id=\"control-container\" class=\"template-control-container\">\r\n              <div class=\"control-item wvs-draggable\" data-type=\"wvs-text\">\r\n                <v-icon medium color=\"white darken-2\"> mdi-sign-text </v-icon>\r\n              </div>\r\n              <div class=\"control-item wvs-draggable\" data-type=\"wvs-check\">\r\n                <v-icon medium color=\"white darken-2\">\r\n                  mdi-check-circle\r\n                </v-icon>\r\n              </div>\r\n              <div class=\"control-item wvs-draggable\" data-type=\"wvs-video\">\r\n                <v-icon medium color=\"white darken-2\"> mdi-video-image </v-icon>\r\n              </div>\r\n            </div>\r\n            <div class=\"wvs-design-control-description\">\r\n              <span\r\n                >Drag & drop control into pdf content to create control.</span\r\n              >\r\n            </div>\r\n\r\n            <div class=\"wvs-coordinate-control\">\r\n              <v-container class=\"wrapper-content-coordinate grey lighten-5\">\r\n                <v-row no-gutters>\r\n                  <v-col cols=\"12\" sm=\"12\" md=\"6\">\r\n                    <span>x</span>\r\n                    <v-card class=\"pa-2 ml-2\" outlined tile>\r\n                      <input\r\n                        type=\"text\"\r\n                        :value=\"\r\n                          this.selectControlRect\r\n                            ? parseInt(this.selectControlRect.x)\r\n                            : 0\r\n                        \"\r\n                        @change=\"onTakeChangeValueCoordinate('x', $event)\"\r\n                      />\r\n                    </v-card>\r\n                    <!-- @change=\"onTakeChangeValueCoordinate(\"x\",$event\")\" /> -->\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"12\" md=\"6\">\r\n                    <span>y</span>\r\n                    <v-card class=\"pa-2 ml-2\" outlined tile>\r\n                      <!-- {{ this.selectControlRect ? this.selectControlRect.y : 0 }} -->\r\n                      <input\r\n                        type=\"text\"\r\n                        :value=\"\r\n                          this.selectControlRect\r\n                            ? parseInt(this.selectControlRect.y)\r\n                            : 0\r\n                        \"\r\n                        @change=\"onTakeChangeValueCoordinate('y', $event)\"\r\n                      />\r\n                    </v-card>\r\n                  </v-col>\r\n\r\n                  <v-col cols=\"12\" sm=\"12\" md=\"6\">\r\n                    <span>width</span>\r\n                    <v-card class=\"pa-2 ml-2\" outlined tile>\r\n                      <input\r\n                        type=\"text\"\r\n                        :value=\"\r\n                          this.selectControlRect\r\n                            ? parseInt(this.selectControlRect.width)\r\n                            : 0\r\n                        \"\r\n                        @change=\"onTakeChangeValueCoordinate('width', $event)\"\r\n                      />\r\n                    </v-card>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"12\" md=\"6\">\r\n                    <span>height</span>\r\n                    <v-card class=\"pa-2 ml-2\" outlined tile>\r\n                      <!-- {{\r\n                      this.selectControlRect ? this.selectControlRect.height : 0\r\n                    }} -->\r\n                      <input\r\n                        type=\"text\"\r\n                        :value=\"\r\n                          this.selectControlRect\r\n                            ? parseInt(this.selectControlRect.height)\r\n                            : 0\r\n                        \"\r\n                        @change=\"onTakeChangeValueCoordinate('height', $event)\"\r\n                      />\r\n                    </v-card>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-container>\r\n            </div>\r\n          </div>\r\n          <div class=\"signer-order\">\r\n            <!-- <span>{{  }}</span> -->\r\n            <template v-if=\"userSigner\">\r\n              <!-- <span>{{ userSigner }}</span> -->\r\n              <div class=\"signer-order-list\">\r\n                <span v-for=\"item in userSigner\" :key=\"item\">{{\r\n                  item.signer\r\n                }}</span>\r\n                <!-- <span>{{ userSigner }}</span> -->\r\n              </div>\r\n              <small style=\"display: block; margin-top: 30px; color: #ffb84b\"\r\n                >(Drag & drop item to change signer order)</small\r\n              >\r\n            </template>\r\n            <template v-else>\r\n              <span>No signer assigned</span>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- !!!!!!!!!!! LOADING  !!!!!!!!!!!-->\r\n    <v-dialog v-model=\"takeLoadingStatus\" hide-overlay persistent width=\"300\">\r\n      <v-card color=\"primary\" dark>\r\n        <v-card-text>\r\n          LOADING\r\n          <v-progress-linear\r\n            indeterminate\r\n            color=\"white\"\r\n            class=\"mb-0\"\r\n          ></v-progress-linear>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n\r\n    <!-- !!!!!!!!!!!!!! INPUT FIELD DIALOG !!!!!!!!!!!!!!!! -->\r\n    <!-- <v-row justify=\"center\">\r\n      <v-dialog v-model=\"dialogInputField\" persistent max-width=\"600px\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <span class=\"headline\">Signer Options</span>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\" sm=\"12\">\r\n                  <v-autocomplete :items=\"userSigner\"></v-autocomplete>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n            <small\r\n              >*Please select field owner. If not specified, anyone can\r\n              change/edit this form value.\r\n            </small>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"blue darken-1\" text @click=\"dialogInputField = false\">\r\n              Cancel\r\n            </v-btn>\r\n            <v-btn color=\"blue darken-1\" text @click=\"dialogInputField = false\">\r\n              Ok\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </v-row> -->\r\n\r\n    <!-- !!!!!!!!!!!!!! INPUT FIELD DIALOG !!!!!!!!!!!!!!!! -->\r\n\r\n    <!-- !!!!!!!!!!!! VIDEO FIELD DIALOG !!!!!!!!!!!!!!!! -->\r\n\r\n    <!-- <v-row justify=\"center\">\r\n      <v-dialog v-model=\"dialogVideoField\" persistent max-width=\"600px\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <span class=\"headline\">Signer Options</span>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-container>\r\n              <v-row>\r\n                <v-col cols=\"12\" sm=\"12\">\r\n                  <v-text-field\r\n                    :rules=\"rulesEmail\"\r\n                    label=\"Email\"\r\n                    hint=\"example of helper text only on focus\"\r\n                    @change=\"\r\n                      onGetFormInput($event, 'VIDEO_CONTROL_FORM', 'email')\r\n                    \"\r\n                  >\r\n                    ></v-text-field\r\n                  >\r\n                \r\n                </v-col>\r\n\r\n                <v-col cols=\"12\" sm=\"12\">\r\n                  <v-checkbox\r\n                    label=\"Show signer thumbnail\"\r\n                    color=\"red\"\r\n                    hide-details\r\n                    @change=\"onCheckBoxChange($event)\"\r\n                  ></v-checkbox>\r\n                  <v-checkbox\r\n                    label=\"2 Factor Authentication\"\r\n                    color=\"red\"\r\n                    hide-details\r\n                    @change=\"onCheckBoxChange($event, 'phoneNumber')\"\r\n                  ></v-checkbox>\r\n                </v-col>\r\n\r\n                <v-col cols=\"12\" sm=\"12\">\r\n                  <v-text-field\r\n                    label=\"Phone\"\r\n                    :disabled=\"DoubleFactor_Authenticate\"\r\n                    :rules=\"rulesPhone\"\r\n                    @change=\"\r\n                      onGetFormInput($event, 'VIDEO_CONTROL_FORM', 'phone')\r\n                    \"\r\n                  ></v-text-field>\r\n                  <small\r\n                    >*(Phone must start with a country code, ie \"+81\" for Japan)\r\n                  </small>\r\n                </v-col>\r\n              </v-row>\r\n            </v-container>\r\n            <small\r\n              >*Please select field owner. If not specified, anyone can\r\n              change/edit this form value.\r\n            </small>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"blue darken-1\" text @click=\"dialogVideoField = false\">\r\n              Cancel\r\n            </v-btn>\r\n            <v-btn\r\n              color=\"blue darken-1\"\r\n              text\r\n              @click=\"onSubmitForm($event, 'VIDEO_SIGNATURE')\"\r\n            >\r\n              Ok\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </v-row> -->\r\n\r\n    <!-- !!!!!!!!!!!! VIDEO FIELD DIALOG !!!!!!!!!!!!!!!! -->\r\n\r\n    <!-- SOLUTION CREATE MULTIPLE SIGNER DIALOG FOR ITEM  -->\r\n    <SignerDialog\r\n      :show=\"this.showControlSetting\"\r\n      :currentControl=\"this.takeCurrentControl\"\r\n      @Approve=\"this.onApprove\"\r\n      @Reject=\"this.onReject\"\r\n    ></SignerDialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { WVSPDFViewComponent, DNDInteractComponent } from \"../../components\";\r\nimport { PDFHelper } from \"../../components/WVS/PDFHelper\";\r\n// import { FileAction } from \"../../vuex/actions\";\r\n// import { PdfAction } from \"../../vuex/actions\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { TemplateAPI } from \"../../api\";\r\nimport SignerOrderDialog from \"../../components/SignerOrder/SignerOrder\";\r\n// import { ModalOrderAction } from \"../../vuex/actions\";\r\nexport default {\r\n  components: {\r\n    SignerDialog: SignerOrderDialog,\r\n    WVSPDFViewComponent,\r\n    DNDInteractComponent,\r\n  },\r\n  computed: {\r\n    takeCurrentControl() {\r\n      //     currentControl={controlCollectionsRef.current.find( (control) => control.id\r\n      // === selectedControlId, )}\r\n      // var currentControl = controlCollections.find((control)=>{\r\n      //   control.id ==\r\n      // })\r\n      var currentControl = this.controlCollections.find(\r\n        (control) => control.id === this.selectControlID\r\n      );\r\n      return currentControl;\r\n    },\r\n    controlRender() {\r\n      // return this.$store.state.PDFMutation.controlRendered;\r\n      return this.$store.state.PDFMutation.controlRendered;\r\n    },\r\n    takeLoadingStatus() {\r\n      return this.$store.state.PDFMutation.loading;\r\n    },\r\n  },\r\n  mounted() {\r\n    TemplateAPI.get({ id: this.templateID }).then((response) => {\r\n      // console.log(\"get template response\", response);\r\n      this.controlCollections = response.data.template[0].controls || [];\r\n      this.templateInfo = response.data.template[0];\r\n    });\r\n\r\n    // console.log(\"THIS PARAM EDIT\", this.$router.params.templateID);\r\n  },\r\n  data() {\r\n    // dragItemClass = \"wvs-draggable\";\r\n    // dropItemClass = \"fv__pdf-page-handler-container\";\r\n    return {\r\n      // controlRender: this.$store.state.PDFMutation.controlRendered,\r\n      pdfLoaded: this.$store.state.PDFMutation.pdfLoaded,\r\n      openInitInteract: false,\r\n      controlCollections: [],\r\n      pdfFile: \"\",\r\n      templateID: this.$route.query.templateID,\r\n      templateInfo: \"\",\r\n      rulesEmail: [\r\n        (value) => !!value || \"Required.\",\r\n        (value) => (value || \"\").length <= 20 || \"Max 20 characters\",\r\n        (value) => {\r\n          const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n          return pattern.test(value) || \"Invalid e-mail.\";\r\n        },\r\n      ],\r\n      rulesPhone: [\r\n        (value) => !!value || \"Required.\",\r\n        (value) => (value || \"\").length <= 13 || \"Max Phone Number 11\",\r\n        (value) => {\r\n          if (value.indexOf(\"+81\") !== -1) {\r\n            console.log(\"Find + 81\");\r\n          } else if (value.indexOf(\"+84\") !== -1) {\r\n            console.log(\"Find + 84\");\r\n          } else {\r\n            return \"Please Input Area Number\";\r\n          }\r\n        },\r\n      ],\r\n\r\n      // loadingDialog: this.$store.state.PDFMutation.loading,\r\n      // loading: this.takeLoadingStatus,\r\n      //FIXME:\r\n      showControlSetting: false,\r\n      userSigner: [],\r\n      DoubleFactor_Authenticate: true,\r\n      formDataInput: {},\r\n      formData: {},\r\n      showSignerOrder: false,\r\n      dialogInputField: false,\r\n      dialogVideoField: false,\r\n      enalbleSignDoc: true,\r\n      dialog: false,\r\n      widthWindow: 0,\r\n      selectControlRect: null,\r\n      selectControlElement: null,\r\n      pdfView: null,\r\n      pdfDoc: null,\r\n      file: null,\r\n      pageRender: {},\r\n      templateCreate: {},\r\n      selectControlID: \"\",\r\n      // windowSize: [0, 0],\r\n      // const [windowSize, setWindowSize] = useState([0, 0]);\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    // controlCollections(value) {\r\n    //   console.log(\"control collection call watch\", value);\r\n    // },\r\n    templateInfo(value) {\r\n      TemplateAPI.getTemplateDoc({ doc: value.path }).then((response) => {\r\n        this.pdfFile = response.data;\r\n      });\r\n    },\r\n    showSignerOrder(newValue) {\r\n      var manager_Switch = document.getElementsByClassName(\r\n        \"wvs-design-control-header\"\r\n      );\r\n      var controlLayout = document.getElementsByClassName(\"wrapper-control\");\r\n      var signerLayout = document.getElementsByClassName(\"signer-order\");\r\n      // console.log(\r\n      //   \"signerOrderElement\",\r\n      // );\r\n      if (newValue === true) {\r\n        manager_Switch[0].firstChild.style.borderBottom = \"3px solid #cccccc\";\r\n        manager_Switch[0].lastChild.style.borderBottom = \"3px solid #ffb84d\";\r\n        controlLayout[0].style.display = \"none\";\r\n        signerLayout[0].style.display = \"block\";\r\n      } else {\r\n        manager_Switch[0].lastChild.style.borderBottom = \"3px solid #cccccc\";\r\n        manager_Switch[0].firstChild.style.borderBottom = \"3px solid #ffb84d\";\r\n        controlLayout[0].style.display = \"block\";\r\n        signerLayout[0].style.display = \"none\";\r\n      }\r\n    },\r\n  },\r\n  // methods: {\r\n  //   myEventHandler(e) {\r\n  //     // your code for handling resize...\r\n  //   }\r\n  // }\r\n\r\n  methods: {\r\n    // resizeHandler(event) {\r\n    //   // console.log(\"window resize\", event);\r\n    // },\r\n    // parentMethods(argument) {\r\n    //   console.log(\"parent method call !!\", argument);\r\n    // },\r\n    onApprove(e) {\r\n      console.log(\"ON APPROVE CALL !!!\", e);\r\n      this.userSigner.push(e);\r\n\r\n      this.showControlSetting = false;\r\n    },\r\n    onReject() {\r\n      console.log(\"ON REJECT CALL !!!\");\r\n      this.showControlSetting = false;\r\n    },\r\n\r\n    onHandleUpdateTemplate() {\r\n      // this.templateID;\r\n      // this.controlCollections;\r\n      this.formData.id = this.templateID;\r\n      this.formData.controls = this.controlCollections;\r\n      console.log(\"FORM ID UPDATE\", this.formData.id);\r\n      console.log(\"FORM CONTROLS UPDATE\", this.formData.controls);\r\n      TemplateAPI.update(this.formData).then((response) => {\r\n        console.log(\"UPDATE RESPONSE !!!\", response);\r\n        if (response.data.status === \"success\") {\r\n          this.$swal({\r\n            title: \"Update Template Success \",\r\n            icon: \"success\",\r\n            timer: 2000,\r\n            showConfirmButton: false,\r\n          });\r\n        } else {\r\n          this.$swal({\r\n            title: \"Update Template Fail \",\r\n            icon: \"error\",\r\n            timer: 2000,\r\n            showConfirmButton: false,\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    onGetFormInput(event, type, nameField) {\r\n      switch (type) {\r\n        case \"VIDEO_CONTROL_FORM\": {\r\n          this.formDataInput.videoControl = {\r\n            ...this.formDataInput.videoControl,\r\n            [nameField]: event,\r\n          };\r\n          break;\r\n        }\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    onSubmitForm(event, type) {\r\n      switch (type) {\r\n        case \"VIDEO_SIGNATURE\": {\r\n          this.dialogVideoField = false;\r\n          if (\r\n            !this.formDataInput.videoControl.phone &&\r\n            this.DoubleFactor_Authenticate === false\r\n          ) {\r\n            console.log(\"Please Input Phone Field Of Video COntrol\");\r\n          }\r\n\r\n          if (!this.formDataInput.videoControl.email) {\r\n            console.log(\"Please Input Email Field Of Video Control\");\r\n          } else {\r\n            // this.userSigner.push(this.formDataInput.videoControl.email);\r\n            // this.userSigner = this.formDataInput.videoControl.email;\r\n            // this.userSigner.push(this.formDataInput.videoControl.email);\r\n            console.log(\"FLAG !!!\");\r\n            // this.userSigner = this.formDataInput.videoControl.email;\r\n            this.userSigner.push(this.formDataInput.videoControl.email);\r\n            // this.userSigner = this.formDataInput.videoControl.email;\r\n            // this.userSigner({\r\n            //   ...this.userSigner,\r\n            //   user: this.userSigner,\r\n            // });\r\n            // console.log(\"USER SIGNER !!!\", this.userSigner);\r\n\r\n            // this.userSigner = this.formDataInput.videoControl.email;\r\n            // var a = Object.assign(\r\n            //   this.userSigner,\r\n            //   this.formDataInput.videoControl.email\r\n            // );\r\n            // console.log(\"Aaa\", a);\r\n            // Object.assign(this.templateCreate, tempObject);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    onHandleUploadFile(fileUpload) {\r\n      if (!fileUpload) {\r\n        return;\r\n      } else {\r\n        this.file = fileUpload;\r\n      }\r\n    },\r\n    onHandleCreate(para) {\r\n      if (!para) {\r\n        return null;\r\n      }\r\n    },\r\n    onHandleCancel(event) {\r\n      event.preventDefault();\r\n      this.$store.dispatch([\r\n        // PdfAction.removeAllControlPDF(),\r\n        this.$router.push({ path: \"/\" }),\r\n      ]);\r\n\r\n      // this.$router.push({ path: \"/\" });\r\n      // this.$store.dispatch([FileAction.removeFile(), this.$router.push({ path: \"/\" })]);\r\n    },\r\n\r\n    async onDropControlHandleDND(control, element) {\r\n      var pageRenderer = this.pdfView.getPDFPageRender(control.pageNo);\r\n      var rect = element.getBoundingClientRect();\r\n      //this is rectangle of drag item\r\n      this.selectControlRect = rect;\r\n      if (!control.id) {\r\n        //NEW CONTROL\r\n        control.id = uuidv4();\r\n        control.scale = pageRenderer.scale;\r\n        control.pageRect = await PDFHelper.deviceRectToPageRect(\r\n          pageRenderer,\r\n          control.deviceRect,\r\n          control.scale\r\n        );\r\n        // this.controlCollections.push(control);\r\n        // PdfAction.addControlToPDF(control);\r\n        this.controlCollections.push(control);\r\n\r\n        element.id = control.id;\r\n      } else {\r\n        //IF EXIST CONTROL IT'S MEAN USER EDIT DRAG ITEM\r\n        //AND WE MUST UPDATE COORDINATE OF DRAG ITEM USER HAS BEEN DROP !!!!!\r\n        //IMPORTANT\r\n        const found = this.controlCollections.find(\r\n          (item) => item.id === control.id\r\n        );\r\n        found.scale = pageRenderer.scale;\r\n        found.deviceRect = control.deviceRect;\r\n        found.pageRect = await PDFHelper.deviceRectToPageRect(\r\n          pageRenderer,\r\n          control.deviceRect,\r\n          control.scale\r\n        );\r\n      }\r\n    },\r\n    onDragControlHandleDND(dragElement) {\r\n      const rect = dragElement.getBoundingClientRect();\r\n      this.selectControlRect = rect;\r\n      this.selectControlElement = dragElement;\r\n    },\r\n    onTakeTemplateName(event) {\r\n      var tempObject = {\r\n        name: event,\r\n        file: this.file,\r\n        controls: this.controlCollections,\r\n        // controls: JSON.stringify(this.controlCollections),\r\n      };\r\n      Object.assign(this.templateCreate, tempObject);\r\n    },\r\n\r\n    onOpenSuccess(doc) {\r\n      // console.log(\"on open success \", doc);\r\n      this.pdfDoc = doc;\r\n    },\r\n    onComplete(doc) {\r\n      this.pdfDoc = doc;\r\n    },\r\n    onRenderPageSuccess(render) {\r\n      this.pageRender = render;\r\n    },\r\n    onInitSuccess(pdfview) {\r\n      this.pdfView = pdfview;\r\n    },\r\n\r\n    onCreateTemplate(event) {\r\n      event.preventDefault();\r\n      this.dialog = false;\r\n    },\r\n    onCloseTemplate() {\r\n      event.preventDefault();\r\n      this.dialog = false;\r\n    },\r\n    onHandleEnableSignDoc() {\r\n      this.enalbleSignDoc = false;\r\n    },\r\n    async onCoordinateControlChange(key, value) {\r\n      const found = this.controlCollections.find(\r\n        (item) => item.id === this.selectControlElement.id\r\n      );\r\n      var pdfViewer = this.pdfView;\r\n      var pageRenderer = await pdfViewer.getPDFPageRender(found.pageNo);\r\n      found.scale = pageRenderer.getScale();\r\n\r\n      var valueToInt = parseInt(value);\r\n      switch (key) {\r\n        case \"x\": {\r\n          this.selectControlRect.x = valueToInt;\r\n          this.selectControlElement.style.left = valueToInt + \"px\";\r\n          found.deviceRect.left = valueToInt;\r\n          found.deviceRect.right =\r\n            found.deviceRect.left + found.deviceRect.width;\r\n          break;\r\n        }\r\n        case \"y\": {\r\n          this.selectControlRect.y = valueToInt;\r\n          this.selectControlElement.style.top = valueToInt + \"px\";\r\n          found.deviceRect.top = valueToInt;\r\n          found.deviceRect.bottom =\r\n            found.deviceRect.top + found.deviceRect.height;\r\n\r\n          break;\r\n        }\r\n        case \"width\": {\r\n          this.selectControlRect.width = valueToInt;\r\n          this.selectControlElement.style.width = valueToInt + \"px\";\r\n          found.deviceRect.width = valueToInt;\r\n          found.deviceRect.right = found.deviceRect.left + valueToInt;\r\n          break;\r\n        }\r\n        case \"height\": {\r\n          this.selectControlRect.height = valueToInt;\r\n          this.selectControlElement.style.height = valueToInt + \"px\";\r\n          found.deviceRect.height = valueToInt;\r\n          found.deviceRect.bottom = found.deviceRect.top + valueToInt;\r\n          break;\r\n        }\r\n      }\r\n\r\n      found.pageRect = await PDFHelper.deviceRectToPageRect(\r\n        pageRenderer,\r\n        found.deviceRect\r\n      );\r\n    },\r\n\r\n    toPageRect(element) {\r\n      var dropElement = element;\r\n      //this is drag item\r\n      var dropZone = element.parentNode;\r\n      var dragItemRect = dropElement.getBoundingClientRect();\r\n      var dropZoneRect = dropZone.getBoundingClientRect();\r\n      var offsetRect = {\r\n        left: dragItemRect.left - dropZoneRect.left,\r\n        top: dragItemRect.top - dropZoneRect.top,\r\n        right: dragItemRect.left - dropZoneRect.left + dragItemRect.width,\r\n        bottom: dragItemRect.top - dropZoneRect.top + dragItemRect.height,\r\n        width: dragItemRect.width,\r\n        height: dragItemRect.height,\r\n      };\r\n      offsetRect.x = offsetRect.left;\r\n      offsetRect.y = offsetRect.top;\r\n      return offsetRect;\r\n    },\r\n    onTakeChangeValueCoordinate(key, event) {\r\n      // console.log(\"take change (2)\", event.target.value);\r\n      this.onCoordinateControlChange(key, event.target.value);\r\n    },\r\n    async onControlResized(control) {\r\n      var pdfViewer = this.pdfview;\r\n      var pageRenderer = await pdfViewer.getPDFPageRender(control.pageNo);\r\n      const found = this.controlCollections.find(\r\n        (item) => item.id === control.id\r\n      );\r\n      found.scale = pageRenderer.getScale();\r\n      found.deviceRect = control.deviceRect;\r\n      found.pageRect = await PDFHelper.deviceRectToPageRect(\r\n        pageRenderer,\r\n        control.deviceRect\r\n      );\r\n    },\r\n    onControlClick(event) {\r\n      event.preventDefault();\r\n      var element = event.target;\r\n      var rect = this.toPageRect(element);\r\n      this.selectControlRect = rect;\r\n      this.selectControlElement = element;\r\n    },\r\n\r\n    onControlDoubleClick(event) {\r\n      console.log(\"ON CONTROL DOUBLE CLICK CALL !!\");\r\n\r\n      // event.preventDefault();\r\n      var target = event.target;\r\n      // var typeControl = target.attributes.dataType.nodeValue;\r\n      // var typeControl = target.getAttribute(\"data-type\");\r\n      var controlID = target.getAttribute(\"id\");\r\n      this.selectControlID = controlID;\r\n      // var formDataControl = {\r\n      //   id: controlID,\r\n      //   type: typeControl,\r\n      // };\r\n      // this.$store.dispatch(ModalOrderAction.showModalOrder(formDataControl));\r\n      // this.showControlSetting = true;\r\n      this.showControlSetting = true;\r\n\r\n      // switch (typeControl) {\r\n      //   case \"wvs-video\": {\r\n\r\n      //     this.dialogVideoField = true;\r\n      //     break;\r\n      //   }\r\n      //   case \"wvs-text\": {\r\n      //     this.dialogInputField = true;\r\n      //     break;\r\n      //   }\r\n\r\n      //   case \"wvs-check\": {\r\n      //     this.dialogInputField = true;\r\n\r\n      //     break;\r\n      //   }\r\n      //   default: {\r\n      //     break;\r\n      //   }\r\n      // }\r\n    },\r\n  },\r\n};\r\n</script>\r\n <style scoped src=\"./Template.css\"></style>"]}]}